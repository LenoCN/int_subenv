{
  "version": "1.2",
  "last_updated": "2025-07-22",
  "description": "Hierarchy configuration for interrupt verification environment",
  
  "base_hierarchy": {
    "iosub_top": "top_tb.multidie_top.DUT[0].u_str_top.u_iosub_top_wrap",
    "mcp_top": "top_tb.multidie_top.DUT[0].u_str_top.u_iosub_top_wrap.u0_iosub_top_wrap_hd.u0_iosub_top_wrap_raw.u_mcp_top",
    "scp_top": "top_tb.multidie_top.DUT[0].u_str_top.u_iosub_top_wrap.u0_iosub_top_wrap_hd.u0_iosub_top_wrap_raw.u_scp_top_wrapper",
    "iosub_int_sub": "top_tb.multidie_top.DUT[0].u_str_top.u_iosub_top_wrap.u0_iosub_top_wrap_hd.u0_iosub_top_wrap_raw.u_iosub_int_sub",
    "iosub_usb_sub": "top_tb.multidie_top.DUT[0].u_str_top.u_iosub_top_wrap.u0_iosub_top_wrap_hd.u0_iosub_top_wrap_raw.u_iosub_usb_sub",
    "smmu_wrapper": "top_tb.multidie_top.DUT[0].u_str_top.u_iosub_top_wrap.u0_iosub_top_wrap_hd.u0_iosub_top_wrap_raw.u_iosub_bus_out_sub.u_smmu_iosub_top_wrap",
    "iodap": "top_tb.multidie_top.DUT[0].u_str_top.u_iosub_top_wrap.u0_iosub_top_wrap_hd.u0_iosub_top_wrap_raw.u_iodap"
  },
  
  "signal_mappings": {
    "iosub_inputs": {
      "accel_iosub_scp2imu_mhu_send_intr": "accel_iosub_scp2imu_mhu_send_intr",
      "accel_iosub_mcp2imu_mhu_send_intr": "accel_iosub_mcp2imu_mhu_send_intr",
      "accel_iosub_imu2scp_mhu_receive_intr": "accel_iosub_imu2scp_mhu_receive_intr",
      "accel_iosub_imu2mcp_mhu_receive_intr": "accel_iosub_imu2mcp_mhu_receive_intr",
      "accel_iosub_imu_ws1_intr": "accel_iosub_imu_ws1_intr",
      "csub_iosub_pll_lock_intr": "csub_iosub_pll_lock_intr",
      "csub_iosub_pll_unlock_intr": "csub_iosub_pll_unlock_intr",
      "csub_iosub_pll_frechangedone_intr": "csub_iosub_pll_frechangedone_intr",
      "csub_iosub_pll_frechange_tot_done_intr": "csub_iosub_pll_frechange_tot_done_intr",
      "csub_iosub_pll_intdocfrac_err_intr": "csub_iosub_pll_intdocfrac_err_intr",
      "csub_to_iosub_intr": "csub_to_iosub_intr",
      "psub_to_iosub_intr": "psub_to_iosub_intr",
      "pcie1_to_iosub_intr": "pcie1_to_iosub_intr",
      "accel_to_iosub_intr": "accel_to_iosub_intr",
      "d2d_to_iosub_intr": "d2d_to_iosub_intr",
      "ddr0_to_iosub_intr": "ddr0_to_iosub_intr",
      "ddr1_to_iosub_intr": "ddr1_to_iosub_intr",
      "ddr2_to_iosub_intr": "ddr2_to_iosub_intr"
    },
    
    "iosub_outputs": {
      "iosub_accel_peri_intr": "iosub_accel_peri_intr"
    },
    
    "mcp_signals": {
      "iosub_to_mcp_intr": "cpu_irq",
      "mcp_to_iosub_intr": "mcp_to_iosub_intr",
      "mcp_to_iosub_hierarchy": "top_tb.multidie_top.DUT[0].u_str_top.u_iosub_top_wrap.u0_iosub_top_wrap_hd.u0_iosub_top_wrap_raw.u_mcp_top"
    },

    "scp_signals": {
      "iosub_to_scp_intr": "cpu_irq",
      "scp_to_iosub_intr": "scp_to_iosub_intr",
      "scp_to_iosub_hierarchy": "top_tb.multidie_top.DUT[0].u_str_top.u_iosub_top_wrap.u0_iosub_top_wrap_hd.u0_iosub_top_wrap_raw.u_scp_top_wrapper"
    },

    "iosub_int_sub_signals": {
      "accel_iosub_scp2imu_mhu_send_intr": "accel_iosub_scp2imu_mhu_send_intr",
      "accel_iosub_mcp2imu_mhu_send_intr": "accel_iosub_mcp2imu_mhu_send_intr",
      "accel_iosub_imu2scp_mhu_receive_intr": "accel_iosub_imu2scp_mhu_receive_intr",
      "accel_iosub_imu2mcp_mhu_receive_intr": "accel_iosub_imu2mcp_mhu_receive_intr",
      "accel_iosub_imu_wsl_intr": "accel_iosub_imu_wsl_intr",
      "csub_iosub_pll_lock_intr": "csub_iosub_pll_lock_intr",
      "csub_iosub_pll_unlock_intr": "csub_iosub_pll_unlock_intr",
      "csub_iosub_pll_frechangedone_intr": "csub_iosub_pll_frechangedone_intr",
      "csub_iosub_pll_frechange_tot_done_intr": "csub_iosub_pll_frechange_tot_done_intr",
      "csub_iosub_pll_intdocfrac_err_intr": "csub_iosub_pll_intdocfrac_err_intr",
      "csub_to_iosub_intr": "csub_to_iosub_intr",
      "psub_to_iosub_intr": "psub_to_iosub_intr",
      "pcie1_to_iosub_intr": "pcie1_to_iosub_intr",
      "accel_to_iosub_intr": "accel_to_iosub_intr",
      "d2d_to_iosub_intr": "d2d_to_iosub_intr",
      "ddr0_to_iosub_intr": "ddr0_to_iosub_intr",
      "ddr1_to_iosub_intr": "ddr1_to_iosub_intr",
      "ddr2_to_iosub_intr": "ddr2_to_iosub_intr",
      "smmu_ras_intr": "smmu_ras_intr",
      "iosub_smmu_level_intr": "iosub_smmu_level_intr",
      "iosub_usb_intr": "iosub_usb_intr",
      "iosub_peri_intr": "iosub_peri_intr",
      "iosub_dap_intr": "iosub_dap_intr",
      "scp_to_iosub_intr": "scp_to_iosub_intr",
      "mcp_to_iosub_intr": "mcp_to_iosub_intr",
      "iosub_smmu_pulse_intr": "iosub_smmu_pulse_intr",
      "d2d_s2s_intr": "d2d_s2s_intr",
      "iosub_to_scp_intr": "iosub_to_scp_intr",
      "iosub_to_mcp_intr": "iosub_to_mcp_intr",
      "iosub_to_accel_intr": "iosub_to_accel_intr",
      "pad_int_i": "pad_int_i"
    }
  },
  
  "signal_widths": {
    "iosub_to_mcp_intr": 240,
    "mcp_to_iosub_intr": 8,
    "iosub_to_scp_intr": 240,
    "scp_to_iosub_intr": 53,
    "iosub_to_ap_intr": 224,
    "iosub_accel_peri_intr": 32,
    "csub_iosub_pll_lock_intr": 17,
    "csub_iosub_pll_unlock_intr": 17,
    "csub_iosub_pll_frechangedone_intr": 17,
    "csub_iosub_pll_frechange_tot_done_intr": 17,
    "csub_iosub_pll_intdocfrac_err_intr": 17,
    "csub_to_iosub_intr": 21,
    "psub_to_iosub_intr": 22,
    "pcie1_to_iosub_intr": 22,
    "accel_to_iosub_intr": 15,
    "d2d_to_iosub_intr": 18,
    "ddr0_to_iosub_intr": 11,
    "ddr1_to_iosub_intr": 11,
    "ddr2_to_iosub_intr": 11,
    "iosub_smmu_level_intr": 3,
    "iosub_smmu_pulse_intr": 12,
    "smmu_ras_intr": 3,
    "iosub_usb_intr": 10,
    "iosub_peri_intr": 70,
    "iosub_dap_intr": 3,
    "d2d_s2s_intr": 5,
    "iosub_to_accel_intr": 32,
    "pad_int_i": 16
  },
  
  "interrupt_groups": {
    "CSUB": {
      "description": "Core subsystem interrupts",
      "base_signal": "csub_to_iosub_intr",
      "special_signals": {
        "pll_lock": "csub_iosub_pll_lock_intr",
        "pll_unlock": "csub_iosub_pll_unlock_intr",
        "pll_frechangedone": "csub_iosub_pll_frechangedone_intr",
        "pll_frechange_tot_done": "csub_iosub_pll_frechange_tot_done_intr",
        "pll_intdocfrac_err": "csub_iosub_pll_intdocfrac_err_intr"
      }
    },
    
    "PSUB": {
      "description": "Power subsystem interrupts",
      "base_signal": "psub_to_iosub_intr"
    },
    
    "PCIE1": {
      "description": "PCIe lane 1 interrupts",
      "base_signal": "pcie1_to_iosub_intr"
    },
    
    "ACCEL": {
      "description": "Accelerator interrupts - 20 total interrupts (sub_index 0-19)",
      "base_signal": "accel_to_iosub_intr",
      "special_signals": {
        "accel_iosub_scp2imu_mhu_send_intr": "accel_iosub_scp2imu_mhu_send_intr",
        "accel_iosub_imu2scp_mhu_receive_intr": "accel_iosub_imu2scp_mhu_receive_intr",
        "accel_iosub_imu_ws1_intr": "accel_iosub_imu_ws1_intr",
        "accel_iosub_mcp2imu_mhu_send_intr": "accel_iosub_mcp2imu_mhu_send_intr",
        "accel_iosub_imu2mcp_mhu_receive_intr": "accel_iosub_imu2mcp_mhu_receive_intr"
      },
      "special_hierarchy": {
        "accel_iosub_scp2imu_mhu_send_intr": "iosub_int_sub",
        "accel_iosub_imu2scp_mhu_receive_intr": "iosub_int_sub",
        "accel_iosub_mcp2imu_mhu_send_intr": "iosub_int_sub",
        "accel_iosub_imu2mcp_mhu_receive_intr": "iosub_int_sub"
      },
      "comment": "MHU interrupts (sub_index 0,1,3,4) at iosub_int_sub, imu_ws1 (sub_index 2) at top level, others (sub_index 5-19) use accel_to_iosub_intr[sub_index-5]"
    },
    
    "D2D": {
      "description": "Die-to-die interrupts",
      "base_signal": "d2d_to_iosub_intr"
    },
    
    "DDR0": {
      "description": "DDR0 controller interrupts",
      "base_signal": "ddr0_to_iosub_intr"
    },
    
    "DDR1": {
      "description": "DDR1 controller interrupts",
      "base_signal": "ddr1_to_iosub_intr"
    },
    
    "DDR2": {
      "description": "DDR2 controller interrupts",
      "base_signal": "ddr2_to_iosub_intr"
    },
    
    "SCP": {
      "description": "System control processor interrupts",
      "base_signal": "scp_to_iosub_intr"
    },
    
    "MCP": {
      "description": "Management control processor interrupts",
      "base_signal": "mcp_to_iosub_intr"
    },
    
    "IOSUB": {
      "description": "IO subsystem internal interrupts",
      "base_signal": "iosub_peri_intr"
    },

    "USB": {
      "description": "USB controller interrupts",
      "base_signal": "iosub_usb_intr",
      "special_signals": {
        "usb0_apb1ton_intr": "usb0_apb1ton_intr",
        "usb1_apb1ton_intr": "usb1_apb1ton_intr",
        "usb_top_apb1ton_intr": "usb_top_apb1ton_intr"
      },
      "special_hierarchy": {
        "usb0_apb1ton_intr": "iosub_usb_sub",
        "usb1_apb1ton_intr": "iosub_usb_sub",
        "usb_top_apb1ton_intr": "iosub_usb_sub"
      }
    },

    "SMMU": {
      "description": "System Memory Management Unit interrupts",
      "hierarchy": "smmu_wrapper",
      "use_interrupt_name_as_signal": true,
      "signal_name_prefix": "o_",
      "special_signals": {
        "pulse": "iosub_smmu_pulse_intr",
        "ras": "smmu_ras_intr"
      }
    },

    "IODAP": {
      "description": "IO Debug Access Port interrupts",
      "hierarchy": "iodap",
      "use_interrupt_name_as_signal": true,
      "special_signals": {
        "iodap_chk_err_etf0": "chk_err_etf0",
        "iodap_chk_err_etf1": "chk_err_etf1",
        "iodap_etr_buf_intr": "etr_bufintr",
        "iodap_catu_addrerr_intr": "catu_addrerr",
        "iodap_sdc600_intr": "sdc600_intr"
      },
      "base_signal": "iosub_dap_intr"
    },

    "IO_DIE": {
      "description": "IO die interrupts",
      "base_signal": "pad_int_i"
    }
  },
  
  "destination_mappings": {
    "scp": {
      "signal": "cpu_irq",
      "hierarchy_path": "top_tb.multidie_top.DUT[0].u_str_top.u_iosub_top_wrap.u0_iosub_top_wrap_hd.u0_iosub_top_wrap_raw.u_scp_top_wrapper.u_scp_top.u_m7_wrapper",
      "max_index": 239
    },
    "mcp": {
      "signal": "cpu_irq",
      "hierarchy_path": "top_tb.multidie_top.DUT[0].u_str_top.u_iosub_top_wrap.u0_iosub_top_wrap_hd.u0_iosub_top_wrap_raw.u_mcp_top.u_cortexm7_wrapper",
      "max_index": 239
    },
    "ap": {
      "signal": "iosub_to_ap_intr",
      "hierarchy_path": "top_tb.multidie_top.DUT[0].u_str_top.u_iosub_top_wrap.u0_iosub_top_wrap_hd.u0_iosub_top_wrap_raw.u_iosub_int_sub",
      "max_index": 223
    },
    "imu": {
      "signal": "iosub_accel_peri_intr",
      "max_index": 31
    },
    "io": {
      "signal": "iosub_to_io_intr",
      "max_index": 3
    },
    "other_die": {
      "signal": "int_bus",
      "hierarchy_path": "top_tb.multidie_top.DUT[0].u_str_top.u_iosub_top_wrap.u0_iosub_top_wrap_hd.u0_iosub_top_wrap_raw.u_scp_top_wrapper.u_scp_top.u_int_to_axi",
      "max_index": 16
    }
  },

  "hierarchy_selection_rules": {
    "stimulus_hierarchy": {
      "description": "Rules for selecting hierarchy for interrupt stimulus",
      "external_subsystems": "iosub_top",
      "mcp_interactions": "mcp_top",
      "scp_interactions": "scp_top",
      "internal_boundaries": "iosub_int_sub"
    },
    "monitor_hierarchy": {
      "description": "Rules for selecting hierarchy for interrupt monitoring",
      "external_subsystems": "iosub_top",
      "mcp_interactions": "mcp_top",
      "scp_interactions": "scp_top",
      "internal_boundaries": "iosub_int_sub",
      "cross_boundary_check": "iosub_int_sub"
    },
    "signal_type_mapping": {
      "external_inputs": ["PSUB", "DDR0", "DDR1", "DDR2", "ACCEL", "CSUB", "pcie1", "D2D"],
      "mcp_signals": ["MCP"],
      "scp_signals": ["SCP"],
      "internal_signals": ["IOSUB", "USB", "SMMU", "IODAP", "IO_DIE"],
      "boundary_signals": [
        "accel_iosub_scp2imu_mhu_send_intr",
        "accel_iosub_mcp2imu_mhu_send_intr",
        "accel_iosub_imu2scp_mhu_receive_intr",
        "accel_iosub_imu2mcp_mhu_receive_intr",
        "accel_iosub_imu_wsl_intr"
      ]
    },
    "group_to_iosub_signal_mapping": {
      "description": "Mapping from interrupt groups to iosub_int_sub boundary signals",
      "USB": "iosub_usb_intr",
      "SMMU": "iosub_smmu_level_intr",
      "IODAP": "iosub_dap_intr",
      "IO_DIE": "pad_int_i",
      "CSUB": "csub_to_iosub_intr",
      "PSUB": "psub_to_iosub_intr",
      "PCIE1": "pcie1_to_iosub_intr",
      "ACCEL": "accel_to_iosub_intr",
      "D2D": "d2d_to_iosub_intr",
      "DDR0": "ddr0_to_iosub_intr",
      "DDR1": "ddr1_to_iosub_intr",
      "DDR2": "ddr2_to_iosub_intr",
      "SCP": "scp_to_iosub_intr",
      "MCP": "mcp_to_iosub_intr"
    }
  },
  
  "validation_rules": {
    "required_signals": [
      "csub_to_iosub_intr",
      "psub_to_iosub_intr",
      "iosub_to_scp_intr",
      "iosub_to_mcp_intr"
    ],
    "index_ranges": {
      "csub_to_iosub_intr": [0, 20],
      "psub_to_iosub_intr": [0, 21],
      "iosub_to_scp_intr": [0, 130],
      "iosub_to_mcp_intr": [0, 145]
    }
  },
  
  "update_history": [
    {
      "date": "2025-07-17",
      "version": "1.0",
      "changes": "Initial hierarchy configuration based on provided signal list",
      "author": "Augment Agent"
    },
    {
      "date": "2025-07-21",
      "version": "1.1",
      "changes": "Updated hierarchy paths based on actual DUT structure: AP, SCP, MCP signal paths corrected with proper hierarchy and bit widths",
      "author": "Augment Agent"
    },
    {
      "date": "2025-07-22",
      "version": "1.2",
      "changes": "Fixed SMMU wrapper hierarchy and signal naming: Added smmu_wrapper base hierarchy, updated SMMU interrupt group to use correct hierarchy path, and implemented use_interrupt_name_as_signal feature for direct signal name mapping",
      "author": "Augment Agent"
    },
    {
      "date": "2025-07-24",
      "version": "1.3",
      "changes": "Added signal_name_prefix support for SMMU interrupts: SMMU interrupt signal names now use 'o_' prefix before interrupt name to match actual RTL signal naming convention",
      "author": "Augment Agent"
    }
  ]
}
